{"version":3,"sources":["index.js"],"names":["e","React","createElement","QueryForm","props","state","query","handleChange","bind","handleSubmit","event","window","history","pushState","this","fetch","encodeURIComponent","then","response","json","result","return_dom","push","result_index","i","length","charAt","href","key","slice","className","ReactDOM","render","document","getElementById","error","console","log","preventDefault","setState","target","value","onSubmit","method","id","onChange","type","autoFocus","Component","App"],"mappings":"kPAMMA,G,kBAAIC,IAAMC,eAGVC,E,kDACJ,WAAYC,GAAQ,IAAD,8BACjB,cAAMA,IACDC,MAAQ,CAACC,MAAO,IACrB,EAAKC,aAAe,EAAKA,aAAaC,KAAlB,gBACpB,EAAKC,aAAe,EAAKA,aAAaD,KAAlB,gBAJH,E,yDAONE,GAAQ,IAAD,OAClBC,OAAOC,QAAQC,UAAU,GAAI,GAA7B,uBAAiDC,KAAKT,MAAMC,QAC5DS,MAAM,mDAAD,OAAoDC,mBAAmBF,KAAKT,MAAMC,SACtFW,MAAK,SAAAC,GAAQ,OAAIA,EAASC,UAC1BF,MACC,SAACG,GACC,IAAIC,EAAa,GACjB,GAAI,UAAWD,EACbC,EAAWC,KAAKF,EAAM,YAItB,IAFA,IAAIG,EAAe,EACfC,EAAI,EACDA,EAAI,EAAKnB,MAAMC,MAAMmB,QACtBF,GAAgBH,EAAOK,QACzBD,IAAMJ,EAAOG,GAAP,WACNF,EAAWC,KAAK,EAAKjB,MAAMC,MAAMoB,OAAOF,IACxCA,MAEAA,EAAIJ,EAAOG,GAAP,QAAkC,EACtCF,EAAWC,KAAKtB,EAAE,IAAK,CAAC2B,KAAK,GAAD,OA7BpB,kCA6BoB,OAAqBP,EAAOG,GAAP,MAAgCK,IAAKL,GAAe,EAAKlB,MAAMC,MAAMuB,MAAMT,EAAOG,GAAP,UAAmCH,EAAOG,GAAP,WAC/JF,EAAWC,KAAKtB,EAAE,MAAO,CAAC8B,UAAW,WAAYF,IAAI,GAAD,OAAKL,EAAL,QAAnC,YAAiEH,EAAOG,GAAP,YAAjE,QACjBA,GAAgB,GAItBQ,IAASC,OAAOX,EAAYY,SAASC,eAAe,cAEtD,SAACC,GAAWC,QAAQC,IAAIF,MAE1BzB,EAAM4B,mB,mCAGK5B,GACXI,KAAKyB,SAAS,CAACjC,MAAOI,EAAM8B,OAAOC,U,+BAInC,OACE,6BACE,0BAAMC,SAAU5B,KAAKL,aAAckC,OAAO,OACpC,2BAAOC,GAAG,gBAAgBH,MAAO3B,KAAKT,MAAMC,MAAOuC,SAAU/B,KAAKP,aAAcuC,KAAK,OAAOC,WAAS,KAE3G,yBAAKH,GAAG,gB,GAlDQ3C,IAAM+C,WAyDxBC,E,uKAEF,OACE,6BACE,oCACA,kBAAC9C,EAAD,W,GALUF,IAAM+C,WAWxBjB,IAASC,OACP,kBAACiB,EAAD,MACAhB,SAASC,eAAe,U","file":"static/js/main.84b89e35.chunk.js","sourcesContent":["import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './normalize.css';\nimport './skeleton.css';\nimport './style.css';\n\nconst e = React.createElement;\nconst WIKIDATA_LINK = 'https://www.wikidata.org/wiki/';\n\nclass QueryForm extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {query: ''};\n    this.handleChange = this.handleChange.bind(this);\n    this.handleSubmit = this.handleSubmit.bind(this);\n  }\n\n  handleSubmit(event) {\n    window.history.pushState(\"\", \"\", `api/v1/query=${this.state.query}`);\n    fetch(`{process.env.REACT_APP_SERVER_URL}/api/v1?query=${encodeURIComponent(this.state.query)}`)\n    .then(response => response.json())\n    .then(\n      (result) => {\n        let return_dom = [];\n        if ('error' in result) {\n          return_dom.push(result['error']);\n        } else {\n          let result_index = 0;\n          let i = 0;\n          while (i < this.state.query.length) {\n            if (result_index >= result.length || \n              i !== result[result_index]['start_pos']) {    // ran out of result or still not reach a result yet\n              return_dom.push(this.state.query.charAt(i));\n              i++;\n            } else {\n              i = result[result_index]['end_pos'] + 1;\n              return_dom.push(e('a', {href: `${WIKIDATA_LINK}${result[result_index]['name']}`, key: result_index}, this.state.query.slice(result[result_index]['start_pos'], result[result_index]['end_pos'])));\n              return_dom.push(e('div', {className: 'footnote', key: `${result_index}_fn`}, ` (${result[result_index]['description']}) `));\n              result_index += 1;\n            }\n          }\n        }\n        ReactDOM.render(return_dom, document.getElementById('result'))\n      },\n      (error) => {console.log(error)}\n    );\n    event.preventDefault();\n  }\n\n  handleChange(event) {\n    this.setState({query: event.target.value});\n  }\n\n  render() {\n    return (\n      <div>\n        <form onSubmit={this.handleSubmit} method=\"GET\">\n              <input id='textbox_query' value={this.state.query} onChange={this.handleChange} type='text' autoFocus/>\n        </form>\n        <div id=\"result\">\n        </div>\n      </div>\n    );\n  }\n}\n\nclass App extends React.Component {\n  render() {\n    return (\n      <div>\n        <h1>nerd</h1>\n        <QueryForm />\n      </div>\n    );\n  }\n}\n\nReactDOM.render(\n  <App />,\n  document.getElementById('root')\n);\n\n"],"sourceRoot":""}